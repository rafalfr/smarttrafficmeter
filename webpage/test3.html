<!doctype html>
<html>
    <head>
        <title>current stats</title>
<style type="text/css">        
select {
float: left;
margin-right: 5px;
}
</style>
<script src="/jquery.js" type="text/javascript"></script>
<script src="/jscolor.js" type="text/javascript"></script>
</head>
    <body onload="Settings()">

<script type="application/javascript">

function Settings(){
var $leap=false;
var $start_year = $('.start_year');
var $start_month = $('.start_month');
var $start_day = $('.start_day');
var $start_hour = $('.start_hour');

var $end_year = $('.end_year');
var $end_month = $('.end_month');
var $end_day = $('.end_day');
var $end_hour = $('.end_hour');

var $stats_type=$('.statstype');

var $submit_button=$('.submit_button');
document.getElementById("submit_button").onclick = show_stats;

$stats_type.change(function(e){
var $type=$('[name="statstype"]:checked').val();
if ($type=='hourly')
{
$start_month.prop('disabled', false);
$start_day.prop('disabled', false);
$start_hour.prop('disabled', false);
$end_month.prop('disabled', false);
$end_day.prop('disabled', false);
$end_hour.prop('disabled', false);
}
else if ($type=='daily')
{
$start_month.prop('disabled', false);
$start_day.prop('disabled', false);
$start_hour.prop('disabled', true);
$end_month.prop('disabled', false);
$end_day.prop('disabled', false);
$end_hour.prop('disabled', true);
}
else if ($type=='monthly')
{
$start_month.prop('disabled', false);
$start_day.prop('disabled', true);
$start_hour.prop('disabled', true);
$end_month.prop('disabled', false);
$end_day.prop('disabled', true);
$end_hour.prop('disabled', true);
}
else if ($type=='yearly')
{
$start_month.prop('disabled', true);
$start_day.prop('disabled', true);
$start_hour.prop('disabled', true);
$end_month.prop('disabled', true);
$end_day.prop('disabled', true);
$end_hour.prop('disabled', true);
}

});


// start date functions

$start_month.change(function(e) {
var $this = $(this);

if ($this.val() > 0)
{
    $start_day.val(-1);
    }

if ($this.val()==1)
{
    set_start_days(31);
    }
    else if ($this.val()==2)
    {
        if ($leap)
        {
        set_start_days(29);
        }
        else
        {
        set_start_days(28);
        }
    }
    else if ($this.val()==3)
    {
        set_start_days(31);
    }
    else if ($this.val()==4)
    {
        set_start_days(30);
    }
    else if ($this.val()==5)
    {
        set_start_days(31);
    }
    else if ($this.val()==6)
    {
        set_start_days(30);
    }
    else if ($this.val()==7)
    {
        set_start_days(31);
    }
    else if ($this.val()==8)
    {
        set_start_days(31);
    }
    else if ($this.val()==9)
    {
        set_start_days(30);
    }
    else if ($this.val()==10)
    {
        set_start_days(31);
    }
    else if ($this.val()==11)
    {
        set_start_days(30);
    }
    else if ($this.val()==12)
    {
        set_start_days(31);
    }    

});

$start_year.change(function(e)
{
if ($(this).val() > 0)
{
    $leap = is_leap($start_year.val());
    $start_month.val(-1);
    $start_day.val(-1);
}
});

// end date functions

$end_month.change(function(e) {
var $this = $(this);

if ($this.val() > 0)
{
    $end_day.val(-1);
    }

if ($this.val()==1)
{
    set_end_days(31);
    }
    else if ($this.val()==2)
    {
        if ($leap)
        {
        set_end_days(29);
        }
        else
        {
        set_end_days(28);
        }
    }
    else if ($this.val()==3)
    {
        set_end_days(31);
    }
    else if ($this.val()==4)
    {
        set_end_days(30);
    }
    else if ($this.val()==5)
    {
        set_end_days(31);
    }
    else if ($this.val()==6)
    {
        set_end_days(30);
    }
    else if ($this.val()==7)
    {
        set_end_days(31);
    }
    else if ($this.val()==8)
    {
        set_end_days(31);
    }
    else if ($this.val()==9)
    {
        set_end_days(30);
    }
    else if ($this.val()==10)
    {
        set_end_days(31);
    }
    else if ($this.val()==11)
    {
        set_end_days(30);
    }
    else if ($this.val()==12)
    {
        set_end_days(31);
    }    

});

$end_year.change(function(e)
{
if ($(this).val() > 0)
{
    $leap = is_leap($end_year.val());
    $end_month.val(-1);
    $end_day.val(-1);
}
});


function set_start_days(num) {
$start_day.empty();
for (var i = 1; i <= num; i++) {
    if (i < 10) // Put 0 in front of the single digits
    $start_day.append("<option value='0" + i + "'>0" + i + "</option>")
    else
    $start_day.append("<option value='" + i + "'>" + i + "</option>")
}
}

function set_end_days(num) {
$end_day.empty();
for (var i = 1; i <= num; i++) {
    if (i < 10)
    $end_day.append("<option value='0" + i + "'>0" + i + "</option>")
    else
    $end_day.append("<option value='" + i + "'>" + i + "</option>")
}
}

function show_stats() {
str="/";
str+=$('[name="statstype"]:checked').val();
str+="/";
str+="start=";
str+=$start_year.val();
str+="-";
str+=$start_month.val();
str+="-";
str+=$start_day.val();
str+="-";
str+=$start_hour.val();
str+="&end=";
str+=$end_year.val();
str+="-";
str+=$end_month.val();
str+="-";
str+=$end_day.val();
str+="-";
str+=$end_hour.val();
str+="&charttype=";
str+=$('[name="charttype"]:checked').val();
//alert(str);
window.location.href=str;
};

function is_leap (yr) { return (yr%400)?((yr%100)?((yr%4)?false:true):false):true; }
}
</script>

<form class="statstype">
<input type="radio" name="statstype" value="hourly" checked> hourly stats
<input type="radio" name="statstype" value="daily"> daily stats
<input type="radio" name="statstype" value="monthly"> monthly stats
<input type="radio" name="statstype" value="yearly"> yearly stats
</form> 


start date
<div>
<select class="start_year">
    <option selected="selected" value="start_year">Year</option>
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012">2012</option>
    <option value="2013">2013</option>
    <option value="2014">2014</option>
    <option value="2015">2015</option>
    <option value="2016">2016</option>
    <option value="2017">2017</option>
</select>
</div>
    <div>
<select class="start_month">
    <option selected="selected" value="start_month">Month</option>
    <option value="01">January(1)</option>
    <option value="02">February(2)</option>
    <option value="03">March(3)</option>
    <option value="04">April(4)</option>
    <option value="05">May(5)</option>
    <option value="06">June(6)</option>
    <option value="07">July(7)</option>
    <option value="08">August(8)</option>
    <option value="09">September(9)</option>
    <option value="10">October(10)</option>
    <option value="11">November(11)</option>
    <option value="12">December(12)</option>
</select>
</div>
<div>
<select class="start_day">
    <option selected="selected" value="start_day">Day</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    <option value="06">6</option>
    <option value="07">7</option>
    <option value="08">8</option>
    <option value="09">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>
</div>
<div>
<select class="start_hour">
    <option selected="selected" value="start_hour">Hour</option>
    <option value="0">0</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    <option value="06">6</option>
    <option value="07">7</option>
    <option value="08">8</option>
    <option value="09">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    </select>
</div>

<br><br>
end date
<div>
<select class="end_year">
    <option selected="selected" value="end_year">Year</option>
    <option value="2010">2010</option>
    <option value="2011">2011</option>
    <option value="2012">2012</option>
    <option value="2013">2013</option>
    <option value="2014">2014</option>
    <option value="2015">2015</option>
    <option value="2016">2016</option>
    <option value="2017">2017</option>
</select>
</div>
    <div>
<select class="end_month">
    <option selected="selected" value="end_month">Month</option>
    <option value="01">January(1)</option>
    <option value="02">February(2)</option>
    <option value="03">March(3)</option>
    <option value="04">April(4)</option>
    <option value="05">May(5)</option>
    <option value="06">June(6)</option>
    <option value="07">July(7)</option>
    <option value="08">August(8)</option>
    <option value="09">September(9)</option>
    <option value="10">October(10)</option>
    <option value="11">November(11)</option>
    <option value="12">December(12)</option>
</select>
</div>
<div>
<select class="end_day">
    <option selected="selected" value="end_day">Day</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    <option value="06">6</option>
    <option value="07">7</option>
    <option value="08">8</option>
    <option value="09">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>
</div>
<div>
<select class="end_hour">
    <option selected="selected" value="end_hour">Hour</option>
    <option value="0">0</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    <option value="06">6</option>
    <option value="07">7</option>
    <option value="08">8</option>
    <option value="09">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    </select>
</div>

<br><br>
upload color <input id="up_color" value="ff0000" class="jscolor {width:243, height:200, position:'right',
    borderColor:'#FFF', insetColor:'#FFF', backgroundColor:'#666'}">
<br>
download color <input id="up_color" value="00ff00" class="jscolor {width:243, height:200, position:'right',
    borderColor:'#FFF', insetColor:'#FFF', backgroundColor:'#666'}">
    
<br><br>
<form id="charttype">
<input  type="radio" name="charttype" value="bar" checked> bar chart<br>
<input  type="radio" name="charttype" value="line"> line chart<br>
</form> 
<input id="submit_button" type="button" value="Show stats" />
    </body>
</html>


