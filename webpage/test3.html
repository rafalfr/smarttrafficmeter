<!doctype html>
<html>
    <head>
        <title>current stats</title>
        
        
        </head>
<body>


<p><b>4c-cc-6a-4f-ef-67</b> <span id="4c-cc-6a-4f-ef-67"></span></p>
<p><b>00-30-4f-27-b5-c3</b> <span id="00-30-4f-27-b5-c3"></span></p>

<br>
<CENTER>
<FORM NAME="stpw">
<INPUT TYPE="BUTTON" Name="startbutton" VALUE="Start" onClick="timer = setInterval(LoadData, 1000)">
<INPUT TYPE="BUTTON" Name="stopbutton" VALUE="Stop" onClick="clearInterval(timer)">
<INPUT TYPE="BUTTON" NAME="reset" VALUE="Reset" onClick="resetstats()">
</FORM>
</CENTER>

<script>
	var stats = {};
	stats["00-30-4f-27-b5-c3"]={};
	stats["4c-cc-6a-4f-ef-67"]={};

    stats["00-30-4f-27-b5-c3"]["down"]=0;
    stats["00-30-4f-27-b5-c3"]["up"]=0;
	stats["4c-cc-6a-4f-ef-67"]["down"]=0;
	stats["4c-cc-6a-4f-ef-67"]["up"]=0;
	
	function resetstats()
	{
    stats["00-30-4f-27-b5-c3"]["down"]=0;
    stats["00-30-4f-27-b5-c3"]["up"]=0;
	stats["4c-cc-6a-4f-ef-67"]["down"]=0;
	stats["4c-cc-6a-4f-ef-67"]["up"]=0;	
	}	
	

</script>


<script>

	var xhttp = new XMLHttpRequest();

	//var timer = setInterval(LoadData, 1000);

	xhttp.onreadystatechange = function ()
	{
		if (this.readyState == 4 && this.status == 200)
		{
			var json_obj = JSON.parse(this.responseText);
			for (var mac in json_obj)
			{
				if (json_obj.hasOwnProperty(mac))
				{                  

					var down = json_obj[mac].yearly["down"];
					var up = json_obj[mac].yearly["up"];
					
					stats[mac]["down"]+=down;
					stats[mac]["down"]+=up;
					
					document.getElementById(mac).innerHTML = value2str(stats[mac]["down"]);
		
				
				}
			}

		}
	};

	function value2str(value)
	{
		unit = "";

		if (value >= 1024 * 1024 * 1024 * 1024 * 1024)
		{
			scale = 1024.0 * 1024.0 * 1024.0 * 1024.0 * 1024.0;
			unit = "PB";
		}
		else if (value >= 1024 * 1024 * 1024 * 1024)
		{
			scale = 1024.0 * 1024.0 * 1024.0 * 1024.0;
			unit = "TB";
		}
		else if (value >= 1024 * 1024 * 1024)
		{
			scale = 1024.0 * 1024.0 * 1024.0;
			unit = "GB";
		}
		else if (value >= 1024 * 1024)
		{
			scale = 1024.0 * 1024.0;
			unit = "MB";
		}
		else if (value >= 1024)
		{
			scale = 1024.0;
			unit = "KB";
		}
		else
		{
			scale = 1.0;
			unit = "b";
		}

		value /= scale;

		return value.toFixed(2).replace(/\.?0*$/, '') + " " + unit;
	}

	function LoadData()
	{
		xhttp.open("GET", "/stats.json", true);
		xhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
		xhttp.setRequestHeader("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
		xhttp.setRequestHeader("contentType", "application/json; charset=utf-8");
		xhttp.overrideMimeType("application/json");
		xhttp.send();
	}
	
</script>


</body>

</html>
